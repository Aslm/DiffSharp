<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Reverse AD
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Reverse AD
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{page-description}">
    <meta name="author" content="Tomas Petricek">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    
    <link type="text/css" rel="stylesheet" href="misc/style.css" />
    <script src="misc/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
        </ul>
        <h3 class="muted">DiffSharp</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1>Reverse AD</h1>

<p>DiffSharp currently provides a single implementation of reverse AD, using what is known in AD literature as a <em>tape</em>. In future releases of the library, we will provide several other implementations.</p>

<p>For a complete list of available differentiation operations, please refer to <a href="api-overview.html">API Overview</a> and <a href="reference/index.html">API Reference</a>.</p>

<h2>DiffSharp.AD.Reverse</h2>

<p>This is a reverse AD module that works by recording a trace of operations in forward evaluation and using this in the reverse sweep for backpropagating adjoints. The technique is essentially equivalent to the backpropagation method for training artificial neural networks, which is just a special case of reverse AD.</p>

<p>Reverse AD provides a performance advantage when computing gradients of vector-to-scalar functions.</p>

<p>This module is used with the <strong>Adj</strong> numeric type.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">AD</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">Reverse</span>

<span class="c">// g: Adj[] -&gt; Adj</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">g</span> (<span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">Adj</span>[]) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="i">sin</span> (<span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="i">x</span><span class="o">.</span>[<span class="n">0</span>] <span class="o">*</span> <span onmouseout="hideTip(event, 'fs5', 9)" onmouseover="showTip(event, 'fs5', 9)" class="i">x</span><span class="o">.</span>[<span class="n">1</span>] <span class="o">*</span> <span onmouseout="hideTip(event, 'fs5', 10)" onmouseover="showTip(event, 'fs5', 10)" class="i">x</span><span class="o">.</span>[<span class="n">2</span>])

<span class="c">// Gradient of g at (2, 3, 5)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="i">gg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="i">grad</span> <span onmouseout="hideTip(event, 'fs4', 13)" onmouseover="showTip(event, 'fs4', 13)" class="i">g</span> [|<span class="n">2.</span>; <span class="n">3.</span>; <span class="n">5.</span>|]</pre>
</td>
</tr>
</table>

          <div class="tip" id="fs1">namespace DiffSharp</div>
<div class="tip" id="fs2">namespace DiffSharp.AD</div>
<div class="tip" id="fs3">module Reverse<br /><br />from DiffSharp.AD</div>
<div class="tip" id="fs4">val g : x:Adj [] -&gt; Adj<br /><br />Full name: Gettingstarted-reversead.g</div>
<div class="tip" id="fs5">val x : Adj []</div>
<div class="tip" id="fs6">Multiple items<br />type Adj =<br />&#160;&#160;new : p:float -&gt; Adj<br />&#160;&#160;new : p:float * a:float -&gt; Adj<br />&#160;&#160;val P: float<br />&#160;&#160;val mutable A: float<br />&#160;&#160;member AddAdj : a:float -&gt; unit<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;static member Acos : x:Adj -&gt; Adj<br />&#160;&#160;static member Asin : x:Adj -&gt; Adj<br />&#160;&#160;static member Atan : x:Adj -&gt; Adj<br />&#160;&#160;static member Cos : x:Adj -&gt; Adj<br />&#160;&#160;...<br /><br />Full name: DiffSharp.AD.Reverse.Adj<br /><br />--------------------<br />new : p:float -&gt; Adj<br />new : p:float * a:float -&gt; Adj</div>
<div class="tip" id="fs7">val sin : value:&#39;T -&gt; &#39;T (requires member Sin)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sin</div>
<div class="tip" id="fs8">val gg : float []<br /><br />Full name: Gettingstarted-reversead.gg</div>
<div class="tip" id="fs9">val grad : f:(Adj [] -&gt; Adj) -&gt; (float [] -&gt; float [])<br /><br />Full name: DiffSharp.AD.Reverse.ReverseOps.grad</div>
          
        </div>
        <div class="span3">
          <a href="index.html"><img src="img/diffsharp-logo.png" style="width:140px;height:140px;margin:10px 0px 0px 20px;border-style:none;"/></a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">DiffSharp</li>
            <li><a href="index.html">Home Page</a></li>
            <li><a href="">Get DiffSharp via NuGet</a></li>
            <li><a href="http://github.com/gbaydin/DiffSharp">GitHub Page</a></li>
            <li><a href="http://github.com/gbaydin/DiffSharp/blob/master/RELEASE-NOTES.md">Release Notes</a></li>

            <li class="nav-header">Getting Started</li>
            <li><a href="gettingstarted-typeinference.html">Type Inference</a></li>
            <li><a href="gettingstarted-forwardad.html">Forward AD</a></li>
            <li><a href="gettingstarted-reversead.html">Reverse AD</a></li>
            <li><a href="gettingstarted-numericaldifferentiation.html">Numerical Differentiation</a></li>
            <li><a href="gettingstarted-symbolicdifferentiation.html">Symbolic Differentiation</a></li>

            <li class="nav-header">Benchmarks</li>
            <li><a href="benchmarks.html">Benchmarks</a></li>
            
            <li class="nav-header">Reference</li>
            <li><a href="api-overview.html">API Overview</a></li>
            <li><a href="reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
  </html>